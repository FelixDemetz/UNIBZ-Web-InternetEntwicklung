<html lang="en">

    <head>
        <title>FreeCon</title>
        
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width"> <!-- Mobile responsive -->
        <!-- <meta name="description" content="Meta Text">
        <meta name="keywords" content="Keywords, Webseitenname, Inhabername uns"> -->
        <meta name="author" content="Felix Demetz, Lucas Glück">
        
        <link rel="stylesheet" type="text/css"   href="/css/style.css">
        
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> <!-- Bootsrap Framework -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> <!-- Menu Icon -->

        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"> <!-- Google Icons -->
        
        <link rel="preconnect" href="https://fonts.gstatic.com"> 
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&display=swap" rel="stylesheet"> <!-- Font -->
    </head>

    <body>
        <!-- Navbar -->
        <div>
            <div class="nav" id="myTopnav">
                <a id="nav3" href="/login">log out</a>
                <a id="nav2" onclick="showPostingPane()">Post</a>
                <a id="nav2" onclick="showFeed()" href="/home/feed">Feed</a>
                <a id="nav1" onclick="showProfile()" style="text-decoration:underline" name="username">{%username%}</a>
                <a style="float: left !important" id="nav0" href="/">FreeCon</a>
            </div>
        </div>

        <!-- Section profile -->
        <div style="display:none" class="section" id="1">
            <div class="container" style="text-align: center">
                <h2 style="text-align: center">Profile</h2>
                <div style="margin-bottom: 40">
                    <p id="profileUsername"></p>
                    <p>Name: {%name%} {%surname%}</p>
                    <p>Beschreibung:<br>{%description%}</p>
                </div>
                <button class="button" style="margin-inline: auto">
                    <a class="link" href="">Edit</a>
                </button>
                <button style="background-color: red !important; margin-inline: auto"class="button" onClick="showAlert()">
                    <a class="link" id="userToDelete">Delete User</a>   <!-- Link is created in a function -->
                </button>
            </div>
        </div>
        
        <!-- Section see all feeds -->
        <div class="section" id="2">
            {%feed%}
        </div>

        <!-- Section write own post -->
        <div style="display:none" class="section" id="3">
            <div class="container">
                <h2>Post a message</h2>
                <form id="loginLabels" className="col 6" action="/home/newPost" id="newPost" method="POST">
                    <div>
                        <label class="form-label" for="description">Connect!</label>
                        <textarea style="width: 100% !important; height: 100px !important" type="text" class="form-control" id="text" name="text">spread love</textarea>
                        <textarea style="display: none; width: 100% !important; height: 100px !important" type="text" class="form-control" id="textArea" name="textArea">spread love</textarea>
                        <div class="col-6">
                        <button class="button" type="submit" >
                            <a class="link" id="newPost">Post</a>
                        </button>
                        <!-- onclick="getUsername()" -->
                    </div>
                </form>
            </div>
        </div>
                
    </body>

    <!-- SCRIPTS -->
    
    <script href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <script> /* Gets the username of the Profile for other tags */
        let username = document.getElementById("nav1").textContent;
        document.getElementById("profileUsername").innerHTML = "Username: " + username;

        document.getElementById("textArea").innerHTML = username;
    </script>

    <script>
        function getUsername() {
        var linkInBtnForNewPost = document.getElementById('newPost');
        linkInBtnForNewPost.href = "/home/newPost?username=" + username;
        }
    </script>

    <script>
      // The function below will start the confirmation dialog
      function showAlert() {
        var linkInBtnToDeleteUser = document.getElementById('userToDelete');
        let confirmAction = confirm("Are you sure to delete your FreeCon account?");
        if (confirmAction) {
            linkInBtnToDeleteUser.href = "/home/delete?username=" + username;
        } else {
            showProfile();
        }
      }
    </script>

    <script> /* In der Navbar wird zwischen "nav" und "nav responsive" gewechselt wenn der icon gedrückt wird */
        function myFunction() {
            var x = document.getElementById("myTopnav");
            if (x.className === "nav") {
                x.className += " responsive";
            } else {
                x.className = "nav";
            }
        }
    </script>

    <script> /* Shows text and hides it (under the foto of the Teammembers) */
        var x1 = document.getElementById("1");
        var x2 = document.getElementById("2");
        var x3 = document.getElementById("3");
            
        function showProfile() {
            x1.style.display = "block";
            x2.style.display = "none";
            x3.style.display = "none";
        }

        function showFeed() {
            if (x2.style.display === "none") {
                x2.style.display = "block";
                x1.style.display = "none";
                x3.style.display = "none";
            }
        }

        function showPostingPane() {
            if (x3.style.display === "none") {
                x3.style.display = "block";
                x1.style.display = "none";
                x2.style.display = "none";
            }
        }
    </script>
        
</html>